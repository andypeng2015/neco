Ignition-template
=========
[ignition-template](../ignition-template) automatically generates configuration files for each environment such as `common-<cluster>.yml` and `site-<cluster>.yml`.
It can also generate configuration files such as `site.yml`.
The configuration files are generated based on [setting.json](../ignition-template/setting.json).
If you change the contents of the configuration files or add new configuration files, please modify the [setting.json](../ignition-template/setting.json) file.

A configuration file can be generated by the following command.
```bash
make setup
# Generate and place site.yml|site-<cluster>.yml files.
make site-env
# Generate and place config.yml|config-<cluster>.yml files.
make common-env
```

## Generate diffs of configurations for each environment

A configgenerator command is provided to examine the differences between each environment.
The configgenerator generates a readable configuration file based on the specified roles and clusters.
Configgenerator clusters are optional and will work even if only roles are specified in the configgenerator command.
The generated configuration files can be diffed using the diff command to see how they differ from environment to environment.

The following commands can be used to generate files by specifying roles and clusters.
The file will be generated under `/tmp/roles/<role>/`.
The file name is `site.yml|site-<cluster>.yml`.
```bash
make build
./bin/configgenerator --cluster=<cluster name> <role>
```

The command to display the differences in configurations for each environment is as follows.
```
git diff /tmp/roles/test1/site.yml /tmp/roles/test1/site-cluster.yml
```
